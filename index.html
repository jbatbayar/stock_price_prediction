<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meta Stock Price Prediction & Trading Strategy</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Meta Stock Price Prediction & Trading Strategy</h1>
        <h3 style="text-align: right;">Jessica Batbayar</h3>

        <div class="section">
            <h2>Overview</h2>
            <p>This project develops a machine-learning-based trading strategy to predict Meta’s (META) stock price movements and execute 
                buy/sell decisions. Leveraging my strengths in coding and machine learning, I applied predictive modeling techniques to financial 
                markets—an area I am newly exploring. The goal is to build a system that increases portfolio value while managing risk. Performance 
                is evaluated using backtesting on historical stock data to assess profitability and risk-adjusted returns.</p>
        </div>

        <div class="section">
            <h3>Key Results</h3>
            <ul>
                <li><strong>Total Profit:</strong> $9,401.00</li>
                <li><strong>Sharpe Ratio:</strong> 3.82</li>
                <li><strong>Max Drawdown:</strong> -6.51%</li>
            </ul>

            <h3>Model Performance</h3>
            <ul>
                <li><strong>Accuracy</strong>: 0.93</li>
                <li><strong>Precision</strong>: 0.80</li>
                <li><strong>Recall</strong>: 0.98</li>
                <li><strong>F1-Score</strong>: 0.88</li>
            </ul>
            <p>These metrics collectively highlight the strategy's <strong>profitability</strong> with a <strong>strong risk-adjusted return</strong> and controlled <strong>downside
                risk</strong>. The model’s high predictive performance demonstrates reliable buy/sell signals, with high precision reducing costly false
                positives and strong recall ensuring profitable opportunities are captured, ultimately minimizing false signals and unnecessary trades.</p>
        </div>

        <div class="section">
            <h2>Key Learnings</h2>
            <ul>
                <li><strong>Balancing Precision and Recall:</strong> Lowering the prediction threshold improved recall but required careful tuning to avoid excessive false positives.</li>
                <li><strong>Risk Management:</strong> Adding stop-loss rules and holding periods reduced drawdowns and improved risk-adjusted returns.</li>
                <li><strong>Realism in Backtesting:</strong> Incorporating slippage and transaction costs made the strategy more realistic and credible.</li>
            </ul>
        </div>

        <div class="section">
            <h2>Visualizations</h2>
            <h4>Portfolio Performance Over Time</h4>
            <p><u>How Portfolio Value Is Simulated:</u></p>
            <p>The portfolio value is simulated based on the model's buy and sell signals. Starting with an initial capital of $10,000, the simulation
                follows realistic trading conditions. When a buy signal appears, all available capital is used to purchase shares, accounting for a small slippage
                (<strong>0.35%</strong> added to the price). Once shares are held, the simulation checks for a selling condition each day. Shares are sold either if the price falls by 
                <strong>5%</strong> (stop-loss) or after holding for 5 days. Each day, the portfolio value is updated based on the current stock price or available cash after selling. 
                This process helps visualize how the model's predictions would perform in a real trading scenario.</p>
              
            <iframe src="visualizations/portfolio_performance.html"></iframe>
            <p>This graph shows how the value of an investment portfolio changes over time based on buy and sell signals from my predictive model. The line represents the 
                portfolio’s value in dollars, starting from an initial amount of $10'000 and adjusting as trades are made. The goal is to visualize how well the model performs – a rising line suggests the portfolio is growing in value, while a declining line may indicate poor performance.</p>
            <p>The graph shows a steady upward trend in portfolio value, suggesting the model’s <strong>trading signals effectively captured</strong> profitable opportunities, growing the initial $10,000 investment significantly.</p>
        </div>

        <div class="section">
            <h4>Actual Stock Price vs. Model’s Buy/Sell Signals</h4>
            <iframe src="visualizations/price_vs_predictions.html"></iframe>
            <p>This graph shows the actual daily closing stock price over time (blue line), along with the buy and sell signals generated by my predictive model:</p>
                <ul>
                <li>Green upward triangles (<span style="color:green;">▲</span>) represent days when the model predicted the stock price would rise the next day – a potential buy signal.</li>
                <li>Red downward triangles (<span style="color:red;">▼</span>) represent days when the model predicted the stock price would fall the next day – a potential sell signal.</li>
                </ul>
                <p>The goal is to see how well the buy/sell predictions align with the actual price movements. 
                    Ideally, buy signals should occur before price increases, and sell signals before price drops.</p>
                <p>The alignment of buy signals before price increases and sell signals before declines demonstrates that the <strong>model accurately anticipates price movements</strong>, validating its predictive capability.</p>
        </div>

        <div class="section">
            <h4>SHAP Feature Importance</h4>
            <img src="visualizations/shap_summary.png" alt="SHAP Summary Plot">
            <p>This bar chart shows which factors influenced the model’s predictions the most. Each bar represents a feature, with longer bars indicating a greater impact.</p>
            <p><code>RSI_14_Return</code> is the most important feature, meaning the model relied heavily on it when predicting stock price movements. This analysis helps understand which features drive the model’s decisions.</p>
        </div>

        <div class="section">
            <h2>Data Splits & Target Variable</h2>
            <p><strong>Data After 2023:</strong></p>
                <ul>
                    <li>Data from 2015 to 2025 was collected originally.</li>
                    <li>Focused on recent data during training and testing, ensuring relevance to Meta’s current market behavior.</li>
                </ul>
            <p><strong>Target Definition:</strong>
            <ul>
                <li>Initially, the <code>Target</code> was <code>1</code> if the price increased at all (<code>Close[t+1] > Close[t]</code>).</li>  
                <li>Small price fluctuations led to noisy predictions and low accuracy. </li>
                <li>Changed the <code>Target</code> to <code>1</code> if the price increased by at least <strong>1%</strong>.</li>
                <li>This threshold ensures that buy signals correspond to meaningful price gains, reducing noise from small, random fluctuations that could lead to unnecessary trades and transaction costs.</li>
            </ul>
        </div>

        <div class="section">
            <h2>Model Selection</h2>
            <h3>Why XGBoost?</h3>
            <ul>
                <li><strong>Handles Imbalanced Data:</strong> The <code>scale_pos_weight</code> parameter was set based on the class ratio to ensure the model appropriately weighs minority class samples, addressing the imbalance often present in stock movement data.</li>
                <li><strong>Captures Non-Linear Relationships:</strong> With <code>max_depth=5</code>, the model effectively identifies complex, non-linear patterns in technical indicators and stock price movements.</li>
                <li><strong>Controlled Learning:</strong> <code>learning_rate=0.1</code> balances the model’s speed and performance, ensuring gradual convergence and reducing the risk of fitting noise in financial data.</li>
                <li><strong>Strong Performance in Structured Data:</strong> Extensive testing against <code>Random Forest</code> and <code>Logistic Regression</code> confirmed that XGBoost consistently delivered higher accuracy and more reliable predictions for stock price classification.</li>
            </ul>
        </div>

        <div class="section">
            <h2>Problem-Solving Journey</h2>
            <h3>1. Initial Challenges</h3>
            <ul>
                <li><strong>Imbalanced Dataset:</strong> The target variable (<code>Target = 1</code> if price rises by 1%) had a skewed distribution (e.g., 1737 instances of class 0 vs. 745 instances of class 1).</li>
                <li><strong>Overfitting:</strong> Early models achieved high accuracy (~84%) but always predicted class 0, leading to poor recall and F1-score.</li>
            </ul>

            <h3>2. Changes Made</h3>
            <ul>
            <h4>a. Addressing Class Imbalance</h4>
            <ul>
                <li>Class Weighting: Used <code>scale_pos_weight</code> in <code>XGBoost</code> to penalize misclassifying the minority class.</li>
                <li>Feature Engineering: Added volatility, daily range and macroeconomic indicators to improve model performance.</li>
            </ul>
            </ul>

            <ul>
            <h4>b. Improving Backtesting Realism</h4>
            <ul>
                <li>Holding Periods: Increased holding periods from 1 day to <strong>5 days</strong> to capture larger price movements.</li>
                <li>Slippage: Added <strong>0.35%</strong> slippage to simulate real-world trading conditions.</li>
                <li>Transaction Costs: Included a <strong>0.1%</strong> fee per trade to account for brokerage costs.</li>
            </ul>
            </ul>

            <ul>
            <h4>c. Reducing Overfitting</h4>
            <ul>
                <li>Simplified Features: Reduced the number of features to focus on the most impactful ones (e.g., <code>RSI</code>, <code>MACD</code>, <code>Volatility</code>).</li>
                <li>Recent Data: Trained the model on data from <code>2023-01-01</code>–<code>2024-04-30</code>.</li>
            </ul>
            </ul>

            <ul>
            <h4>d. Iterative Refinement</h4>
            <ul>
                <li>Hyperparameter Tuning: Used <code>GridSearchCV</code> to optimize <code>XGBoost</code> parameters (<code>n_estimators</code>, <code>max_depth</code>, <code>learning_rate</code>).</li>
                <li>Validation: Tested the model on out-of-sample data (<code>2024-05-01</code>–<code>2025-02-06</code>) to ensure robustness.</li>
            </ul>
            </ul>
            <p>These refinements collectively improved the model’s predictive accuracy and trading performance, reducing drawdowns and increasing profit consistency in backtesting.</p>
        </div>

        <div class="section">
            <h2>Feature Engineering</h2>
            <p>Selected features based on their relevance to stock price movements, including Moving Averages, RSI, MACD, Volatility, and market indicators like S&P 500 Returns and VIX.</p>
            <table>
                <tr><th>Feature</th><th>Why</th><th>Reasoning</th></tr>
                <tr><td><code>MA_10_Return</code></td><td>10-day window captures short-term trends without being too noisy.</td><td>Helps identify momentum or mean-reversion patterns.</td></tr>
                <tr><td><code>RSI_14_Return</code></td><td>Momentum oscillator indicating overbought/oversold conditions.</td><td>14-day period balances responsiveness with stability.</td></tr>
                <tr><td><code>MACD_Hist</code></td><td>Trend-following indicator showing moving average relationship.</td><td>Histogram captures trend strength.</td></tr>
                <tr><td><code>Volatility_Return</code></td><td>10-day rolling standard deviation measures risk.</td><td>Aligns with short-term trading strategies.</td></tr>
                <tr><td><code>Volume_MA_10</code></td><td>10-day moving average smooths volume fluctuations.</td><td>Indicates strength of price movements.</td></tr>
                <tr><td><code>Range</code></td><td>Daily high-low reflects intraday volatility.</td><td>Identifies significant price movements.</td></tr>
                <tr><td><code>SP500_Return</code></td><td>Captures broader market influence on Meta.</td><td>Shows market-wide trends and sentiment.</td></tr>
                <tr><td><code>VIX_MA_10</code></td><td>10-day moving average smooths market volatility (VIX).</td><td>Captures investor sentiment.</td></tr>
            </table>
        </div>

        <div class="section">
            <h2>Conclusion</h2>
            <p>This project demonstrates the potential of machine learning in developing profitable stock trading strategies, achieving a $9,401 profit and a Sharpe Ratio of 3.82 in backtesting. 
                Key success factors included handling class imbalance, improving backtesting realism, and leveraging feature importance analysis. Future work could explore more advanced ensemble 
                models and additional macroeconomic features to further enhance predictive power and robustness.</p>
        </div>

        

        
    </div>
</body>
</html>
